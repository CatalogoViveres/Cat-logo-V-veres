<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Catálogo Vivere</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #68abe1, #47437e);
      color: #fff;
    }

    header {
      width: 100%;
      height: 144px; /* reducido un 20% */
      background-color: white;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .marquesina {
      width: 100%;
      white-space: nowrap;
      overflow: hidden;
      box-sizing: border-box;
      padding: 0 20px;
    }

    .marquesina p {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 30s linear infinite;
      font-family: 'Orbitron', sans-serif;
      font-size: 36px;
      font-weight: bold;
      color: #0096FF;
      text-shadow: 1px 1px 2px #003366, 2px 2px 4px #0077cc;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    section.category {
      margin-top: 40px;
      text-align: center;
    }

    .category-banner {
      position: relative;
      width: 100%;
      height: 180px;
      background-color: rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }

    .category-banner img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.4;
    }

    .category-banner h2 {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 54px;
      font-weight: bold;
      color: white;
    }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .product {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 10px;
      text-align: center;
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    /* Zoom on hover */
    .product:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      z-index: 2;
      position: relative;
    }

    .product img {
      width: 100%;
      height: auto;
      max-height: 160px;
      object-fit: contain;
      border-radius: 10px;
      background-color: white;
      padding: 5px;
      box-sizing: border-box;
    }

    .product h3 {
      margin: 10px 0 5px;
    }

    .mark {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 0.9em;
    }

    .mark input[type="checkbox"] {
      appearance: none;
      -webkit-appearance: none;
      width: 22px;
      height: 22px;
      border: 2px solid #ccc;
      border-radius: 6px;
      background-color: white;
      cursor: pointer;
      transition: all 0.25s ease;
      position: relative;
      box-shadow: none;
      outline: none;
    }

    .mark input[type="checkbox"]:checked {
      border-color: #00cc66;
      background-color: #00cc66;
      box-shadow: inset 0 0 0 3px white;
      transform: scale(1.05);
    }

    .mark input[type="checkbox"]:hover {
      border-color: #aaa;
    }

    .mark input[type="checkbox"]:checked:hover {
      border-color: #00cc66;
      box-shadow: 0 0 5px rgba(0, 255, 100, 0.5);
    }

    /* WhatsApp floating button */
    .whatsapp-float {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #25D366;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .whatsapp-float:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }
    .whatsapp-float img {
      width: 35px;
      height: 35px;
      pointer-events: none;
    }

    /* Search floating button */
    .search-float {
      position: fixed;
      bottom: 100px; /* Ajusta la posición para que flote sobre el WhatsApp */
      right: 24px;
      background-color: #007BFF; /* Un azul atractivo */
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      z-index: 1000;
      transition: transform 0.3s ease, box-shadow 0.3s ease, width 0.3s ease, border-radius 0.3s ease;
      overflow: hidden; /* Para ocultar el input al principio */
    }
    .search-float:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    }
    .search-float.expanded {
      width: 300px; /* Ancho cuando se expande */
      border-radius: 30px; /* Forma de píldora cuando se expande */
    }
    .search-float i {
      color: white;
      font-size: 28px;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .search-float.expanded i {
      transform: translateX(-110px); /* Mueve el ícono a la izquierda */
      opacity: 0;
    }

    .search-float input {
      border: none;
      background: transparent;
      color: white;
      font-size: 16px;
      width: calc(100% - 70px); /* Ajusta el ancho del input */
      padding: 0 10px;
      opacity: 0;
      pointer-events: none; /* No interactuable al principio */
      transition: opacity 0.3s ease;
      position: absolute;
      left: 20px;
      right: 10px;
      text-align: left;
    }
    .search-float.expanded input {
      opacity: 1;
      pointer-events: auto; /* Interactuable cuando se expande */
    }
    .search-float input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    .search-float input:focus {
      outline: none;
    }


    /* Contador productos seleccionados */
    #contador-seleccionados {
      display: none; /* inicialmente oculto */
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: rgba(0, 0, 0, 0.6);
      color: #00ff99;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: bold;
      font-size: 18px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      box-shadow: 0 4px 12px rgba(0, 255, 153, 0.6);
      user-select: none;
      z-index: 1000;
      min-width: 180px;
      text-align: center;
      transition: background-color 0.3s ease;
    }
    #contador-seleccionados:hover {
      background-color: rgba(0, 0, 0, 0.8);
    }

    /* Responsive para móvil */
    @media (max-width: 600px) {
      #contador-seleccionados {
        font-size: 16px;
        padding: 10px 15px;
        min-width: 140px;
        bottom: 15px;
        left: 15px;
        right: 24px;
      }
      .products {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        padding: 10px;
        gap: 15px;
      }
      .product img {
        height: 150px;
      }
      .category-banner h2 {
        font-size: 36px;
      }
      .search-float {
        bottom: 80px; /* Ajusta la posición para móviles */
        width: 50px;
        height: 50px;
      }
      .search-float i {
        font-size: 24px;
      }
      .search-float.expanded {
        width: 80%; /* Ancho completo para móviles */
        left: 10%;
        right: 10%;
      }
      .search-float.expanded i {
        transform: translateX(-30px); /* Ajuste para móvil */
      }
    }

    .leer-indicador {
      text-align: center;
      font-size: 14px;
      margin-top: -8px;
      color: #00ff99;
      animation: subirBajar 2s ease-in-out infinite;
      font-weight: bold;
      letter-spacing: 1px;
    }

    @keyframes subirBajar {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-4px);
      }
    }

  </style>
</head>
<body>
<header>
  <div class="marquesina">
    <p>
      BIENVENIDOS AL CATÁLOGO DE VÍVERES. MARQUE LOS PRODUCTOS QUE LE INTERESEN Y LUEGO PRESIONE EN EL LOGO DE WHATSAPP PARA CONSULTAR LOS PRECIOS Y LA DISPONIBILIDAD.
    </p>
    <div class="leer-indicador">LEER ↑</div>
  </div>
</header>

<main id="catalogo"></main>

<div id="contador-seleccionados">Productos seleccionados: 0</div>

<div class="whatsapp-float" onclick="enviarWhatsapp()">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
</div>

<div class="search-float" id="searchButton">
  <i class="fas fa-search"></i>
  <input type="text" id="searchInput" placeholder="Buscar productos...">
</div>


<script>
  const categorias = [
    {
      nombre: 'HARINA',
      productos: [
        "Harina Pan 1 kg",
        "Harina Juana 1 kg",
        "Harina Kaly 1 kg",
        "Harina Mary 900 g"
      ]
    },
    {
      nombre: 'ARROZ',
      productos: [
        "Arroz Mary 1 kg",
        "Arroz Gran Marques 1 kg",
        "Arroz Masia 1 kg",
        "Arroz Mónica 1 kg"
      ]
    },
    {
      nombre: 'PASTA',
      productos: [
        "Pasta Capri Larga 1 kg",
        "Pasta Capri Corta 1 kg",
        "Pasta Horizonte Larga 1 kg",
        "Pasta Horizonte Corta 1 kg",
        "Pasta Ronco Larga 1 kg"
      ]
    },
    {
      nombre: 'GRANOS',
      productos: [
        "Caraotas Pantera 500 g",
        "Caraotas Pantera Rojas 500 g",
        "Lentejas Pantera 500 g"
      ]
    },
    {
      nombre: 'MARGARINA',
      productos: [
        "Margarina Deline",
        "Margarina La Pampa"
      ]
    },
    {
      nombre: 'ACEITE',
      productos: [
        "Aceite La Pampa 700 ml",
        "Aceite Coamo 1 lit",
        "Aceite Oriental"
      ]
    },
    {
      nombre: 'AZÚCAR Y PAPELÓN',
      productos: [
        "Azúcar Montalban 1 kg",
        "Azúcar Lider 1 kg",
        "Azúcar Konfit 1 kg",
        "Panela / Papelón"
      ]
    },
    {
      nombre: 'CAFÉ',
      productos: [
        "Café Amanecer",
        "Café Montaña"
      ]
    },
    {
      nombre: 'CONDIMENTOS',
      productos: [
        "Cubitos Maggi"
      ]
    },
    {
      nombre: 'SALSAS',
      productos: [
        "Salsa Tomate Heinz",
        "Salsa Tomate Pampero",
        "Mayonesa Mavesa",
        "Mayonesa Kraft",
        "Mayonesa Sofia"
      ]
    },
    {
      nombre: 'ENLATADOS',
      productos: [
        "Atún En Aceite Margarita",
        "Atún En Aceite Eveba",
        "Sárdinas Oriente"
      ]
    },
    {
      nombre: 'PROTEÍNA',
      productos: [
        "Huevos Medio Carton",
        "Huevos Carton Completo"
      ]
    },
    {
      nombre: 'LIMPIEZA E HIGIENE',
      productos: [
        "Jabón en Polvo Alive 500 g / 1 kg",
        "Crema dental Alident",
        "Crema dental Colgate",
        "Papel Higiénico Caricias",
        "Papel Higiénico Luciano",
        "Papel Higiénico Rosal"
      ]
    },
  ];

  const imagenes = {
    'harina': 'harina.jpg',
    'arroz': 'arroz.jpg',
    'pasta': 'pasta.jpg',
    'granos': 'granos.jpg',
    'margarina': 'margarina.jpg',
    'aceite': 'aceite.jpg',
    'azucar y papelon': 'azucar-y-papelon.jpg',
    'cafe': 'cafe.jpg',
    'condimentos': 'condimentos.jpg',
    'salsas': 'salsas.jpg',
    'enlatados': 'enlatados.jpg',
    'proteina': 'proteina.jpg',
    'limpieza e higiene': 'limpieza.jpeg',
  };

  const productImages = {
    'HARINA_PAN_1_KG': 'PAN.png',
    'HARINA_JUANA_1_KG': 'JUANA.png',
    'HARINA_KALY_1_KG': 'KALY.png',
    'HARINA_MARY_900_G': 'MARY.png',
    'ARROZ_MARY_1_KG': 'ARROZ_MARY.png',
    'ARROZ_GRAN_MARQUES_1_KG': 'ARROZ_MARQUES.png',
    'ARROZ_MASIA_1_KG': 'ARROZ_MASIA.png',
    'ARROZ_MONICA_1_KG': 'ARROZ_MONICA.png',
    'PASTA_CAPRI_LARGA_1_KG': 'PASTA_CAPRI_LARGA.png',
    'PASTA_CAPRI_CORTA_1_KG': 'PASTA_CAPRI_CORTA.png',
    'PASTA_HORIZONTE_LARGA_1_KG': 'PASTA_HORIZONTE_LARGA.png',
    'PASTA_HORIZONTE_CORTA_1_KG': 'PASTA_HORIZONTE_CORTA.png',
    'PASTA_RONCO_LARGA_1_KG': 'PASTA_RONCO.png',
    'CARAOTAS_PANTERA_500_G': 'CARAOTAS_PANTERA.png',
    'CARAOTAS_PANTERA_ROJAS_500_G': 'CARAOTAS_ROJAS_PANTERA.png',
    'LENTEJAS_PANTERA_500_G': 'LENTEJAS_PANTERA.png',
    'MARGARINA_DELINE': 'MARGARINA_DELINE.png',
    'MARGARINA_LA_PAMPA': 'MARGARINA_LA_PAMPA.png',
    'ACEITE_LA_PAMPA_700_ML': 'ACEITE_LA_PAMPA.png',
    'ACEITE_COAMO_1_LIT': 'ACEITE_COAMO.png',
    'ACEITE_ORIENTAL': 'ACEITE_ORIENTAL.png',
    'AZUCAR_MONTALBAN_1_KG': 'AZUCAR_MONTALBAN.png',
    'AZUCAR_LIDER_1_KG': 'AZUCAR_LIDER.png',
    'AZUCAR_KONFIT_1_KG': 'AZUCAR_KONFIT.png',
    'PANELA__PAPELON': 'PAPELON.png',
    'CAFE_AMANECER': 'CAFE_AMANECER.png',
    'CAFE_MONTANA': 'CAFE_MONTAÑA.png',
    'CUBITOS_MAGGI': 'CUBITOS.png',
    'SALSA_TOMATE_HEINZ': 'SALSA_HEINZ.png',
    'SALSA_TOMATE_PAMPERO': 'SALSA_PAMPERO.png',
    'MAYONESA_MAVESA': 'MAYONESA_MAVESA.png',
    'MAYONESA_KRAFT': 'MAYONESA_KRAF.png',
    'MAYONESA_SOFIA': 'MAYONESA_SOFIA.png',
    'ATUN_EN_ACEITE_EVEBA': 'ATUN_EVEBA.png',
    'ATUN_EN_ACEITE_MARGARITA': 'ATUN_MARGARITA.png',
    'SARDINAS_ORIENTE': 'SARDINAS.png',
    'HUEVOS_MEDIO_CARTON': 'HUEVOS_MEDIO.png',
    'HUEVOS_CARTON_COMPLETO': 'HUEVOS_COMPLETO.png',
    'JABON_EN_POLVO_ALIVE_500_G__1_KG': 'JABON_ALIVE.png',
    'CREMA_DENTAL_ALIDENT': 'CREMA_ALIDENT.png',
    'CREMA_DENTAL_COLGATE': 'CREMA_COLGATE.png',
    'PAPEL_HIGIENICO_CARICIAS': 'PAPEL_CARICIAS.png',
    'PAPEL_HIGIENICO_LUCIANO': 'PAPEL_LUCIANO.png',
    'PAPEL_HIGIENICO_ROSAL': 'PAPEL_ROSAL.png'
  };


  const catalogo = document.getElementById('catalogo');
  const contador = document.getElementById('contador-seleccionados');
  const searchButton = document.getElementById('searchButton');
  const searchInput = document.getElementById('searchInput');
  const seleccionados = new Set();
  let ocultarTimeout;

  function renderizarCatalogo(filtro = '') {
    catalogo.innerHTML = ''; // Limpiar el catálogo antes de renderizar
    const filtroLower = filtro.toLowerCase();

    categorias.forEach(cat => {
      const nombreKey = cat.nombre
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
        .replace(/á/g, "a").replace(/é/g, "e").replace(/í/g, "i")
        .replace(/ó/g, "o").replace(/ú/g, "u");

      const imgSrc = imagenes[nombreKey] ? `imagenes/${imagenes[nombreKey]}` : '';

      const productosFiltrados = cat.productos.filter(producto =>
        producto.toLowerCase().includes(filtroLower) || cat.nombre.toLowerCase().includes(filtroLower)
      );

      if (productosFiltrados.length > 0) {
        const seccion = document.createElement('section');
        seccion.className = 'category';

        const productosHTML = productosFiltrados.map(nombreProducto => {
          const key = nombreProducto.toUpperCase()
            .replace(/ /g, '_')
            .replace(/[áÁ]/g, 'A').replace(/[éÉ]/g, 'E')
            .replace(/[íÍ]/g, 'I').replace(/[óÓ]/g, 'O')
            .replace(/[úÚ]/g, 'U').replace(/[ñÑ]/g, 'N')
            .replace(/[^A-Z0-9_]/g, '');
          const imagenProducto = productImages[key];

          if (!imagenProducto) {
            return `
              `;
          }

          const isChecked = seleccionados.has(`${cat.nombre} - ${nombreProducto}`) ? 'checked' : '';

          return `
            <div class="product">
              <img src="imagenes/${imagenProducto}" alt="${nombreProducto}">
              <h3>${nombreProducto}</h3>
              <div class="mark">
                <label>Marcar</label>
                <input type="checkbox" ${isChecked} onchange="marcarProducto(this, '${cat.nombre} - ${nombreProducto}')">
              </div>
            </div>
          `;
        }).join('');

        seccion.innerHTML = `
          <div class="category-banner">
            <img src="${imgSrc}" alt="${cat.nombre}">
            <h2>${cat.nombre}</h2>
          </div>
          <div class="products">
            ${productosHTML}
          </div>
        `;

        if (['AZÚCAR Y PAPELÓN', 'LIMPIEZA E HIGIENE'].includes(cat.nombre.toUpperCase())) {
          seccion.querySelector('h2').style.fontSize = '34px';
        }

        catalogo.appendChild(seccion);
      }
    });
  }

  // Renderizar el catálogo inicialmente
  renderizarCatalogo();

  function marcarProducto(checkbox, nombre) {
    if (checkbox.checked) {
      seleccionados.add(nombre);
    } else {
      seleccionados.delete(nombre);
    }
    actualizarContador();
  }

  function actualizarContador() {
    if (seleccionados.size > 0) {
      contador.style.display = 'block';
      contador.textContent = `Productos seleccionados: ${seleccionados.size}`;

      if (ocultarTimeout) clearTimeout(ocultarTimeout);

      ocultarTimeout = setTimeout(() => {
        contador.textContent = `Produ. Selec: ${seleccionados.size}`;
      }, 1500);

    } else {
      contador.style.display = 'none';
      if (ocultarTimeout) {
        clearTimeout(ocultarTimeout);
        ocultarTimeout = null;
      }
    }
  }

  function enviarWhatsapp() {
    let url = 'https://wa.me/584122923778';
    if (seleccionados.size > 0) {
      let mensaje = 'Hola, estuve viendo su catálogo y me interesa: ' + [...seleccionados].join(', ');
      url += `?text=${encodeURIComponent(mensaje)}`;
    } else {
      url += '?text=' + encodeURIComponent('Hola, estuve viendo su catálogo y me interesa saber el precio de...');
    }
    window.open(url, '_blank');
  }

  // Funcionalidad del buscador
  searchButton.addEventListener('click', () => {
    searchButton.classList.toggle('expanded');
    if (searchButton.classList.contains('expanded')) {
      searchInput.focus();
    } else {
      searchInput.value = ''; // Limpiar el input al cerrarlo
      renderizarCatalogo(); // Mostrar todos los productos de nuevo
    }
  });

  searchInput.addEventListener('input', (event) => {
    renderizarCatalogo(event.target.value);
  });
</script>
</body>
</html>

